<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>گیم ریزه | دنیای مینی‌گیم‌های جذاب</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* متغیرهای رنگ */
        :root {
            --primary: #6c5ce7;
            --secondary: #a29bfe;
            --accent: #fd79a8;
            --dark: #2d3436;
            --light: #dfe6e9;
            --success: #00b894;
            --warning: #fdcb6e;
            --danger: #e17055;
        }

        /* ریست استایل‌ها */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Vazirmatn', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* استایل‌های هدر */
        header {
            background: rgba(26, 26, 46, 0.8);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .header-scrolled {
            padding: 0.7rem 2rem;
            background: rgba(26, 26, 46, 0.95);
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--light);
            text-decoration: none;
        }

        .logo i {
            color: var(--accent);
            animation: pulse 2s infinite;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: var(--light);
            text-decoration: none;
            font-weight: 500;
            position: relative;
            padding: 0.5rem 0;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--accent);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: 0;
            height: 2px;
            background: var(--accent);
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        /* استایل‌های هیرو */
        .hero {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 0 2rem;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 30% 30%, rgba(108, 92, 231, 0.2), transparent 50%),
                        radial-gradient(circle at 70% 70%, rgba(253, 121, 168, 0.15), transparent 50%);
            z-index: -1;
        }

        .hero h1 {
            font-size: 4rem;
            margin-bottom: 1rem;
            background: linear-gradient(to right, var(--accent), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: fadeInUp 1s ease;
        }

        .hero p {
            font-size: 1.5rem;
            max-width: 700px;
            margin-bottom: 2rem;
            animation: fadeInUp 1s ease 0.2s both;
        }

        .cta-button {
            display: inline-block;
            padding: 0.8rem 2rem;
            background: linear-gradient(45deg, var(--primary), var(--accent));
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(108, 92, 231, 0.4);
            animation: fadeInUp 1s ease 0.4s both;
        }

        .cta-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(108, 92, 231, 0.6);
        }

        /* استایل‌های بخش گیم‌ها */
        .games-section {
            padding: 5rem 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 3rem;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            right: 50%;
            transform: translateX(50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(to right, var(--primary), var(--accent));
            border-radius: 2px;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .game-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.4s ease;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .game-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .game-image {
            height: 200px;
            overflow: hidden;
            position: relative;
        }

        .game-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .game-card:hover .game-image img {
            transform: scale(1.1);
        }

        .game-content {
            padding: 1.5rem;
        }

        .game-title {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--light);
        }

        .game-description {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .game-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .game-rating {
            color: var(--warning);
        }

        .play-button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s ease;
            font-weight: 500;
        }

        .play-button:hover {
            background: var(--accent);
        }

        /* استایل‌های گیم‌ها */
        .game-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .game-area {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 30px rgba(108, 92, 231, 0.5);
            position: relative;
        }

        .close-game {
            position: absolute;
            top: 10px;
            left: 10px;
            background: var(--danger);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1rem;
        }

        .game-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            color: var(--light);
            font-size: 0.9rem;
        }

        /* استایل‌های پونگ */
        #pongGame {
            width: 600px;
            height: 400px;
            background: #000;
            position: relative;
            overflow: hidden;
            border: 2px solid var(--primary);
        }

        .paddle {
            width: 15px;
            height: 80px;
            background: var(--accent);
            position: absolute;
        }

        #leftPaddle {
            left: 10px;
        }

        #rightPaddle {
            right: 10px;
        }

        .ball {
            width: 15px;
            height: 15px;
            background: var(--light);
            border-radius: 50%;
            position: absolute;
        }

        .score {
            position: absolute;
            top: 20px;
            font-size: 2rem;
            color: white;
        }

        #leftScore {
            left: 40%;
        }

        #rightScore {
            right: 40%;
        }

        /* استایل‌های مار */
        #snakeGame {
            width: 400px;
            height: 400px;
            background: #000;
            position: relative;
            overflow: hidden;
            border: 2px solid var(--success);
        }

        .snake-segment {
            width: 20px;
            height: 20px;
            background: var(--success);
            position: absolute;
        }

        .snake-food {
            width: 20px;
            height: 20px;
            background: var(--danger);
            border-radius: 50%;
            position: absolute;
        }

        /* استایل‌های شوتر */
        #shooterGame {
            width: 600px;
            height: 400px;
            background: #000;
            position: relative;
            overflow: hidden;
            border: 2px solid var(--warning);
        }

        .player {
            width: 40px;
            height: 40px;
            background: var(--primary);
            position: absolute;
            bottom: 10px;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
        }

        .enemy {
            width: 30px;
            height: 30px;
            background: var(--danger);
            border-radius: 50%;
            position: absolute;
        }

        .bullet {
            width: 5px;
            height: 15px;
            background: var(--warning);
            position: absolute;
        }

        /* استایل‌های پک-من */
        #pacmanGame {
            width: 400px;
            height: 400px;
            background: #000;
            position: relative;
            overflow: hidden;
            border: 2px solid var(--warning);
        }

        .pacman {
            width: 20px;
            height: 20px;
            background: var(--warning);
            border-radius: 50%;
            position: absolute;
        }

        .dot {
            width: 8px;
            height: 8px;
            background: var(--light);
            border-radius: 50%;
            position: absolute;
        }

        .ghost {
            width: 20px;
            height: 20px;
            position: absolute;
            border-radius: 10px 10px 0 0;
        }

        .ghost::before {
            content: '';
            position: absolute;
            width: 6px;
            height: 6px;
            background: white;
            border-radius: 50%;
            top: 5px;
            left: 3px;
        }

        .ghost::after {
            content: '';
            position: absolute;
            width: 6px;
            height: 6px;
            background: white;
            border-radius: 50%;
            top: 5px;
            right: 3px;
        }

        /* استایل‌های تتریس */
        #tetrisGame {
            width: 300px;
            height: 600px;
            background: #000;
            position: relative;
            overflow: hidden;
            border: 2px solid var(--secondary);
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            grid-template-rows: repeat(20, 1fr);
        }

        .tetris-block {
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* استایل‌های پازل */
        #puzzleGame {
            width: 400px;
            height: 400px;
            background: #000;
            position: relative;
            overflow: hidden;
            border: 2px solid var(--accent);
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 2px;
        }

        .puzzle-piece {
            background-size: 400px 400px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .puzzle-piece:hover {
            transform: scale(1.05);
        }

        /* استایل‌های فوتر */
        footer {
            background: rgba(15, 23, 42, 0.9);
            padding: 1.5rem 2rem;
            text-align: center;
        }

        .copyright {
            color: rgba(255, 255, 255, 0.5);
        }

        /* انیمیشن‌ها */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
            }
        }

        /* استایل‌های ریسپانسیو */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 1rem;
            }
            
            .nav-links {
                gap: 1rem;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero p {
                font-size: 1.2rem;
            }
            
            .games-grid {
                grid-template-columns: 1fr;
            }
            
            #pongGame, #shooterGame {
                width: 95vw;
                height: 60vh;
            }
            
            #snakeGame, #pacmanGame, #puzzleGame {
                width: 95vw;
                height: 95vw;
            }
            
            #tetrisGame {
                width: 95vw;
                height: 120vw;
            }
        }

        /* استایل‌های اسکرول بار */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent);
        }
    </style>
</head>
<body>
    <!-- هدر سایت -->
    <header id="header">
        <nav class="navbar">
            <a href="#" class="logo">
                <i class="fas fa-gamepad"></i>
                گیم ریزه
            </a>
            <ul class="nav-links">
                <li><a href="#home">خانه</a></li>
                <li><a href="#games">بازی‌ها</a></li>
            </ul>
        </nav>
    </header>

    <!-- بخش هیرو -->
    <section class="hero" id="home">
        <h1>گیم ریزه</h1>
        <p>دنیایی از مینی‌گیم‌های جذاب و سرگرم‌کننده برای همه سنین</p>
        <a href="#games" class="cta-button">شروع بازی</a>
    </section>

    <!-- بخش گیم‌ها -->
    <section class="games-section" id="games">
        <h2 class="section-title">مینی‌گیم‌های ما</h2>
        <div class="games-grid">
            <!-- کارت بازی پونگ -->
            <div class="game-card">
                <div class="game-image">
                    <img src="https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="بازی پونگ">
                </div>
                <div class="game-content">
                    <h3 class="game-title">پونگ کلاسیک</h3>
                    <p class="game-description">بازی کلاسیک پونگ با هوش مصنوعی. از کلیدهای W/S برای حرکت راکت استفاده کنید.</p>
                    <div class="game-meta">
                        <div class="game-rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                        </div>
                        <button class="play-button" onclick="openGame('pong')">بازی کن</button>
                    </div>
                </div>
            </div>

            <!-- کارت بازی مار -->
            <div class="game-card">
                <div class="game-image">
                    <img src="https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="بازی مار">
                </div>
                <div class="game-content">
                    <h3 class="game-title">مار پرسرعت</h3>
                    <p class="game-description">مار کلاسیک با سرعت بالا. از کلیدهای جهت‌دار برای حرکت استفاده کنید.</p>
                    <div class="game-meta">
                        <div class="game-rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="far fa-star"></i>
                        </div>
                        <button class="play-button" onclick="openGame('snake')">بازی کن</button>
                    </div>
                </div>
            </div>

            <!-- کارت بازی شوتر -->
            <div class="game-card">
                <div class="game-image">
                    <img src="https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="بازی شوتر">
                </div>
                <div class="game-content">
                    <h3 class="game-title">شوتر فضایی</h3>
                    <p class="game-description">سفینه خود را کنترل کنید و به دشمنان شلیک کنید.</p>
                    <div class="game-meta">
                        <div class="game-rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <button class="play-button" onclick="openGame('shooter')">بازی کن</button>
                    </div>
                </div>
            </div>

            <!-- کارت بازی پک-من -->
            <div class="game-card">
                <div class="game-image">
                    <img src="https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="بازی پک-من">
                </div>
                <div class="game-content">
                    <h3 class="game-title">پک-من مدرن</h3>
                    <p class="game-description">نسخه مدرن شده پک-من. تمام نقطه‌ها را جمع‌آوری کنید!</p>
                    <div class="game-meta">
                        <div class="game-rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                        </div>
                        <button class="play-button" onclick="openGame('pacman')">بازی کن</button>
                    </div>
                </div>
            </div>

            <!-- کارت بازی تتریس -->
            <div class="game-card">
                <div class="game-image">
                    <img src="https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="بازی تتریس">
                </div>
                <div class="game-content">
                    <h3 class="game-title">تتریس رنگی</h3>
                    <p class="game-description">تتریس کلاسیک با بلوک‌های رنگی. خطوط را کامل کنید!</p>
                    <div class="game-meta">
                        <div class="game-rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="far fa-star"></i>
                        </div>
                        <button class="play-button" onclick="openGame('tetris')">بازی کن</button>
                    </div>
                </div>
            </div>

            <!-- کارت بازی پازل -->
            <div class="game-card">
                <div class="game-image">
                    <img src="https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="بازی پازل">
                </div>
                <div class="game-content">
                    <h3 class="game-title">پازل جادویی</h3>
                    <p class="game-description">پازل‌های متنوع با تصاویر زیبا. قطعات را جابه‌جا کنید.</p>
                    <div class="game-meta">
                        <div class="game-rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                            <i class="far fa-star"></i>
                        </div>
                        <button class="play-button" onclick="openGame('puzzle')">بازی کن</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- گیم پونگ -->
    <div id="pongContainer" class="game-container">
        <div class="game-area">
            <button class="close-game" onclick="closeGame('pong')">×</button>
            <h2 style="text-align: center; margin-bottom: 10px; color: var(--accent);">پونگ کلاسیک</h2>
            <div id="pongGame">
                <div class="paddle" id="leftPaddle"></div>
                <div class="paddle" id="rightPaddle"></div>
                <div class="ball" id="ball"></div>
                <div class="score" id="leftScore">0</div>
                <div class="score" id="rightScore">0</div>
            </div>
            <div class="game-controls">
                <span>راکت چپ: W/S</span>
                <span>راکت راست: AI</span>
            </div>
        </div>
    </div>

    <!-- گیم مار -->
    <div id="snakeContainer" class="game-container">
        <div class="game-area">
            <button class="close-game" onclick="closeGame('snake')">×</button>
            <h2 style="text-align: center; margin-bottom: 10px; color: var(--success);">مار پرسرعت</h2>
            <div id="snakeGame"></div>
            <div class="game-controls">
                <span>امتیاز: <span id="snakeScore">0</span></span>
                <span>کلیدهای جهت‌دار برای حرکت</span>
            </div>
        </div>
    </div>

    <!-- گیم شوتر -->
    <div id="shooterContainer" class="game-container">
        <div class="game-area">
            <button class="close-game" onclick="closeGame('shooter')">×</button>
            <h2 style="text-align: center; margin-bottom: 10px; color: var(--warning);">شوتر فضایی</h2>
            <div id="shooterGame"></div>
            <div class="game-controls">
                <span>امتیاز: <span id="shooterScore">0</span></span>
                <span>حرکت: چپ/راست | شلیک: Space</span>
            </div>
        </div>
    </div>

    <!-- گیم پک-من -->
    <div id="pacmanContainer" class="game-container">
        <div class="game-area">
            <button class="close-game" onclick="closeGame('pacman')">×</button>
            <h2 style="text-align: center; margin-bottom: 10px; color: var(--warning);">پک-من مدرن</h2>
            <div id="pacmanGame"></div>
            <div class="game-controls">
                <span>امتیاز: <span id="pacmanScore">0</span></span>
                <span>کلیدهای جهت‌دار برای حرکت</span>
            </div>
        </div>
    </div>

    <!-- گیم تتریس -->
    <div id="tetrisContainer" class="game-container">
        <div class="game-area">
            <button class="close-game" onclick="closeGame('tetris')">×</button>
            <h2 style="text-align: center; margin-bottom: 10px; color: var(--secondary);">تتریس رنگی</h2>
            <div id="tetrisGame"></div>
            <div class="game-controls">
                <span>امتیاز: <span id="tetrisScore">0</span></span>
                <span>حرکت: چپ/راست | چرخش: بالا | سریع: پایین</span>
            </div>
        </div>
    </div>

    <!-- گیم پازل -->
    <div id="puzzleContainer" class="game-container">
        <div class="game-area">
            <button class="close-game" onclick="closeGame('puzzle')">×</button>
            <h2 style="text-align: center; margin-bottom: 10px; color: var(--accent);">پازل جادویی</h2>
            <div id="puzzleGame"></div>
            <div class="game-controls">
                <span>برای حل پازل قطعات را جابه‌جا کنید</span>
            </div>
        </div>
    </div>

    <!-- فوتر سایت -->
    <footer>
        <div class="copyright">
            <p>© ۲۰۲۳ کلیه حقوق برای گیم ریزه محفوظ است.</p>
        </div>
    </footer>

    <script>
        // اسکرول هدر
        window.addEventListener('scroll', function() {
            const header = document.getElementById('header');
            if (window.scrollY > 50) {
                header.classList.add('header-scrolled');
            } else {
                header.classList.remove('header-scrolled');
            }
        });

        // انیمیشن اسکرول برای لینک‌ها
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                if (targetId === '#') return;
                
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // انیمیشن برای کارت‌های بازی
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.game-card').forEach(card => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(30px)';
            card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
            observer.observe(card);
        });

        // توابع مدیریت بازی‌ها
        function openGame(gameType) {
            document.getElementById(gameType + 'Container').style.display = 'flex';
            initializeGame(gameType);
        }

        function closeGame(gameType) {
            document.getElementById(gameType + 'Container').style.display = 'none';
            // توقف تمام انیمیشن‌ها
            if (window.gameIntervals) {
                window.gameIntervals.forEach(interval => clearInterval(interval));
                window.gameIntervals = [];
            }
            if (window.gameAnimationFrames) {
                window.gameAnimationFrames.forEach(frame => cancelAnimationFrame(frame));
                window.gameAnimationFrames = [];
            }
        }

        // تابع اولیه‌سازی بازی‌ها
        function initializeGame(gameType) {
            // توقف بازی‌های قبلی
            if (window.gameIntervals) {
                window.gameIntervals.forEach(interval => clearInterval(interval));
                window.gameIntervals = [];
            }
            if (window.gameAnimationFrames) {
                window.gameAnimationFrames.forEach(frame => cancelAnimationFrame(frame));
                window.gameAnimationFrames = [];
            }

            // راه‌اندازی بازی مورد نظر
            switch(gameType) {
                case 'pong':
                    initPong();
                    break;
                case 'snake':
                    initSnake();
                    break;
                case 'shooter':
                    initShooter();
                    break;
                case 'pacman':
                    initPacman();
                    break;
                case 'tetris':
                    initTetris();
                    break;
                case 'puzzle':
                    initPuzzle();
                    break;
            }
        }

        // بازی پونگ
        function initPong() {
            const game = document.getElementById('pongGame');
            const leftPaddle = document.getElementById('leftPaddle');
            const rightPaddle = document.getElementById('rightPaddle');
            const ball = document.getElementById('ball');
            const leftScore = document.getElementById('leftScore');
            const rightScore = document.getElementById('rightScore');
            
            // متغیرهای بازی
            let ballX = 292.5;
            let ballY = 192.5;
            let ballSpeedX = 3;
            let ballSpeedY = 2;
            let leftPaddleY = 160;
            let rightPaddleY = 160;
            let scoreLeft = 0;
            let scoreRight = 0;
            
            // کنترل‌های صفحه کلید
            const keys = {};
            
            document.addEventListener('keydown', (e) => {
                if (['w', 's', 'ArrowUp', 'ArrowDown'].includes(e.key)) {
                    e.preventDefault();
                }
                keys[e.key] = true;
            });
            
            document.addEventListener('keyup', (e) => {
                keys[e.key] = false;
            });
            
            // تابع به‌روزرسانی بازی
            function update() {
                // حرکت راکت چپ (بازیکن)
                if (keys['w'] && leftPaddleY > 0) {
                    leftPaddleY -= 5;
                }
                if (keys['s'] && leftPaddleY < 320) {
                    leftPaddleY += 5;
                }
                
                // حرکت راکت راست (AI)
                const aiPaddleCenter = rightPaddleY + 40;
                if (aiPaddleCenter < ballY - 10) {
                    rightPaddleY += 3;
                } else if (aiPaddleCenter > ballY + 10) {
                    rightPaddleY -= 3;
                }
                
                // محدود کردن حرکت AI
                if (rightPaddleY < 0) rightPaddleY = 0;
                if (rightPaddleY > 320) rightPaddleY = 320;
                
                // حرکت توپ
                ballX += ballSpeedX;
                ballY += ballSpeedY;
                
                // برخورد با دیوارهای بالا و پایین
                if (ballY <= 0 || ballY >= 385) {
                    ballSpeedY = -ballSpeedY;
                }
                
                // برخورد با راکت چپ
                if (ballX <= 25 && ballX >= 10 && ballY >= leftPaddleY && ballY <= leftPaddleY + 80) {
                    ballSpeedX = -ballSpeedX;
                    const hitPos = (ballY - leftPaddleY) / 80;
                    ballSpeedY = (hitPos - 0.5) * 5;
                }
                
                // برخورد با راکت راست
                if (ballX >= 560 && ballX <= 575 && ballY >= rightPaddleY && ballY <= rightPaddleY + 80) {
                    ballSpeedX = -ballSpeedX;
                    const hitPos = (ballY - rightPaddleY) / 80;
                    ballSpeedY = (hitPos - 0.5) * 5;
                }
                
                // امتیازگیری
                if (ballX < 0) {
                    scoreRight++;
                    resetBall();
                }
                if (ballX > 600) {
                    scoreLeft++;
                    resetBall();
                }
                
                // به‌روزرسانی موقعیت‌ها
                leftPaddle.style.top = leftPaddleY + 'px';
                rightPaddle.style.top = rightPaddleY + 'px';
                ball.style.left = ballX + 'px';
                ball.style.top = ballY + 'px';
                leftScore.textContent = scoreLeft;
                rightScore.textContent = scoreRight;
                
                // ادامه بازی
                window.gameAnimationFrames = window.gameAnimationFrames || [];
                window.gameAnimationFrames.push(requestAnimationFrame(update));
            }
            
            // بازنشانی توپ
            function resetBall() {
                ballX = 292.5;
                ballY = 192.5;
                ballSpeedX = (Math.random() > 0.5 ? 1 : -1) * 3;
                ballSpeedY = (Math.random() * 4) - 2;
            }
            
            // شروع بازی
            resetBall();
            update();
        }

        // بازی مار
        function initSnake() {
            const game = document.getElementById('snakeGame');
            const scoreElement = document.getElementById('snakeScore');
            
            // پاک کردن بازی قبلی
            game.innerHTML = '';
            
            // متغیرهای بازی
            const gridSize = 20;
            const gameSize = 400;
            let snake = [{x: 10, y: 10}];
            let food = {x: 15, y: 15};
            let direction = 'right';
            let score = 0;
            let gameSpeed = 150;
            
            // ایجاد غذا
            function createFood() {
                food = {
                    x: Math.floor(Math.random() * (gameSize / gridSize)),
                    y: Math.floor(Math.random() * (gameSize / gridSize))
                };
                
                // اطمینان از اینکه غذا روی مار نباشد
                for (let segment of snake) {
                    if (segment.x === food.x && segment.y === food.y) {
                        return createFood();
                    }
                }
                
                // نمایش غذا
                const foodElement = document.createElement('div');
                foodElement.className = 'snake-food';
                foodElement.style.left = food.x * gridSize + 'px';
                foodElement.style.top = food.y * gridSize + 'px';
                game.appendChild(foodElement);
            }
            
            // نمایش مار
            function drawSnake() {
                // پاک کردن مار قبلی
                document.querySelectorAll('.snake-segment').forEach(seg => seg.remove());
                
                // رسم مار جدید
                for (let i = 0; i < snake.length; i++) {
                    const segment = snake[i];
                    const segmentElement = document.createElement('div');
                    segmentElement.className = 'snake-segment';
                    segmentElement.style.left = segment.x * gridSize + 'px';
                    segmentElement.style.top = segment.y * gridSize + 'px';
                    
                    // سر مار رنگ متفاوت
                    if (i === 0) {
                        segmentElement.style.background = '#00b894';
                    }
                    
                    game.appendChild(segmentElement);
                }
            }
            
            // به‌روزرسانی بازی
            function update() {
                // حرکت مار
                const head = {...snake[0]};
                
                switch(direction) {
                    case 'up': head.y--; break;
                    case 'down': head.y++; break;
                    case 'left': head.x--; break;
                    case 'right': head.x++; break;
                }
                
                // بررسی برخورد با دیوار
                if (head.x < 0 || head.x >= gameSize/gridSize || head.y < 0 || head.y >= gameSize/gridSize) {
                    gameOver();
                    return;
                }
                
                // بررسی برخورد با خود
                for (let i = 0; i < snake.length; i++) {
                    if (snake[i].x === head.x && snake[i].y === head.y) {
                        gameOver();
                        return;
                    }
                }
                
                // اضافه کردن سر جدید
                snake.unshift(head);
                
                // بررسی خوردن غذا
                if (head.x === food.x && head.y === food.y) {
                    score += 10;
                    scoreElement.textContent = score;
                    createFood();
                    
                    // افزایش سرعت
                    if (gameSpeed > 50) {
                        gameSpeed -= 5;
                    }
                } else {
                    // اگر غذا نخورد، دم را حذف کن
                    snake.pop();
                }
                
                // رسم مار و غذا
                drawSnake();
            }
            
            // پایان بازی
            function gameOver() {
                alert(`بازی تمام شد! امتیاز شما: ${score}`);
                score = 0;
                scoreElement.textContent = score;
                snake = [{x: 10, y: 10}];
                direction = 'right';
                gameSpeed = 150;
                createFood();
                drawSnake();
            }
            
            // کنترل‌های صفحه کلید
            document.addEventListener('keydown', (e) => {
                if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {
                    e.preventDefault();
                    
                    switch(e.key) {
                        case 'ArrowUp': if (direction !== 'down') direction = 'up'; break;
                        case 'ArrowDown': if (direction !== 'up') direction = 'down'; break;
                        case 'ArrowLeft': if (direction !== 'right') direction = 'left'; break;
                        case 'ArrowRight': if (direction !== 'left') direction = 'right'; break;
                    }
                }
            });
            
            // شروع بازی
            createFood();
            drawSnake();
            
            window.gameIntervals = window.gameIntervals || [];
            window.gameIntervals.push(setInterval(update, gameSpeed));
        }

        // بازی شوتر
        function initShooter() {
            const game = document.getElementById('shooterGame');
            const scoreElement = document.getElementById('shooterScore');
            
            // پاک کردن بازی قبلی
            game.innerHTML = '';
            
            // متغیرهای بازی
            const player = document.createElement('div');
            player.className = 'player';
            player.style.left = '280px';
            game.appendChild(player);
            
            let playerX = 280;
            let bullets = [];
            let enemies = [];
            let score = 0;
            let enemySpeed = 2;
            
            // کنترل‌های صفحه کلید
            const keys = {};
            
            document.addEventListener('keydown', (e) => {
                if (['ArrowLeft', 'ArrowRight', ' '].includes(e.key)) {
                    e.preventDefault();
                    keys[e.key] = true;
                }
            });
            
            document.addEventListener('keyup', (e) => {
                keys[e.key] = false;
            });
            
            // ایجاد دشمن
            function createEnemy() {
                const enemy = document.createElement('div');
                enemy.className = 'enemy';
                enemy.style.left = Math.random() * 570 + 'px';
                enemy.style.top = '0px';
                game.appendChild(enemy);
                
                enemies.push({
                    element: enemy,
                    x: parseInt(enemy.style.left),
                    y: 0
                });
            }
            
            // شلیک گلوله
            function shoot() {
                const bullet = document.createElement('div');
                bullet.className = 'bullet';
                bullet.style.left = (playerX + 17.5) + 'px';
                bullet.style.top = '350px';
                game.appendChild(bullet);
                
                bullets.push({
                    element: bullet,
                    x: playerX + 17.5,
                    y: 350
                });
            }
            
            // به‌روزرسانی بازی
            function update() {
                // حرکت بازیکن
                if (keys['ArrowLeft'] && playerX > 0) {
                    playerX -= 5;
                }
                if (keys['ArrowRight'] && playerX < 560) {
                    playerX += 5;
                }
                player.style.left = playerX + 'px';
                
                // شلیک
                if (keys[' ']) {
                    if (!window.lastShot || Date.now() - window.lastShot > 300) {
                        shoot();
                        window.lastShot = Date.now();
                    }
                }
                
                // حرکت گلوله‌ها
                for (let i = bullets.length - 1; i >= 0; i--) {
                    const bullet = bullets[i];
                    bullet.y -= 7;
                    bullet.element.style.top = bullet.y + 'px';
                    
                    // حذف گلوله‌های خارج از صفحه
                    if (bullet.y < 0) {
                        game.removeChild(bullet.element);
                        bullets.splice(i, 1);
                    }
                }
                
                // حرکت دشمنان
                for (let i = enemies.length - 1; i >= 0; i--) {
                    const enemy = enemies[i];
                    enemy.y += enemySpeed;
                    enemy.element.style.top = enemy.y + 'px';
                    
                    // بررسی برخورد گلوله با دشمن
                    for (let j = bullets.length - 1; j >= 0; j--) {
                        const bullet = bullets[j];
                        if (Math.abs(bullet.x - enemy.x) < 20 && Math.abs(bullet.y - enemy.y) < 20) {
                            // حذف دشمن و گلوله
                            game.removeChild(enemy.element);
                            game.removeChild(bullet.element);
                            enemies.splice(i, 1);
                            bullets.splice(j, 1);
                            score += 10;
                            scoreElement.textContent = score;
                            break;
                        }
                    }
                    
                    // حذف دشمنان خارج از صفحه
                    if (enemy.y > 400) {
                        game.removeChild(enemy.element);
                        enemies.splice(i, 1);
                    }
                }
                
                // ایجاد دشمن جدید
                if (Math.random() < 0.03) {
                    createEnemy();
                }
                
                // افزایش سرعت دشمنان
                if (score > 0 && score % 50 === 0) {
                    enemySpeed = 2 + Math.floor(score / 50) * 0.5;
                }
            }
            
            // شروع بازی
            window.gameIntervals = window.gameIntervals || [];
            window.gameIntervals.push(setInterval(update, 30));
        }

        // بازی پک-من
        function initPacman() {
            const game = document.getElementById('pacmanGame');
            const scoreElement = document.getElementById('pacmanScore');
            
            // پاک کردن بازی قبلی
            game.innerHTML = '';
            
            // متغیرهای بازی
            const gridSize = 20;
            const gameSize = 400;
            let pacman = {x: 10, y: 10};
            let dots = [];
            let ghosts = [];
            let score = 0;
            let direction = 'right';
            
            // ایجاد نقطه‌ها
            function createDots() {
                for (let x = 1; x < gameSize/gridSize - 1; x++) {
                    for (let y = 1; y < gameSize/gridSize - 1; y++) {
                        if (Math.random() > 0.3) { // 70% شانس ایجاد نقطه
                            const dot = document.createElement('div');
                            dot.className = 'dot';
                            dot.style.left = x * gridSize + 'px';
                            dot.style.top = y * gridSize + 'px';
                            game.appendChild(dot);
                            
                            dots.push({
                                element: dot,
                                x: x,
                                y: y
                            });
                        }
                    }
                }
            }
            
            // ایجاد اشباح
            function createGhosts() {
                const ghostColors = ['#ff0000', '#00ffff', '#ff00ff', '#ffff00'];
                
                for (let i = 0; i < 4; i++) {
                    const ghost = document.createElement('div');
                    ghost.className = 'ghost';
                    ghost.style.background = ghostColors[i];
                    ghost.style.left = (5 + i * 5) * gridSize + 'px';
                    ghost.style.top = 5 * gridSize + 'px';
                    game.appendChild(ghost);
                    
                    ghosts.push({
                        element: ghost,
                        x: 5 + i * 5,
                        y: 5,
                        direction: ['up', 'down', 'left', 'right'][i]
                    });
                }
            }
            
            // ایجاد پک-من
            function createPacman() {
                const pacmanElement = document.createElement('div');
                pacmanElement.className = 'pacman';
                pacmanElement.style.left = pacman.x * gridSize + 'px';
                pacmanElement.style.top = pacman.y * gridSize + 'px';
                game.appendChild(pacmanElement);
            }
            
            // به‌روزرسانی بازی
            function update() {
                // حرکت پک-من
                switch(direction) {
                    case 'up': pacman.y--; break;
                    case 'down': pacman.y++; break;
                    case 'left': pacman.x--; break;
                    case 'right': pacman.x++; break;
                }
                
                // بررسی برخورد با دیوار
                if (pacman.x < 0) pacman.x = gameSize/gridSize - 1;
                if (pacman.x >= gameSize/gridSize) pacman.x = 0;
                if (pacman.y < 0) pacman.y = gameSize/gridSize - 1;
                if (pacman.y >= gameSize/gridSize) pacman.y = 0;
                
                // بررسی خوردن نقطه‌ها
                for (let i = dots.length - 1; i >= 0; i--) {
                    const dot = dots[i];
                    if (pacman.x === dot.x && pacman.y === dot.y) {
                        game.removeChild(dot.element);
                        dots.splice(i, 1);
                        score += 5;
                        scoreElement.textContent = score;
                    }
                }
                
                // حرکت اشباح
                for (let ghost of ghosts) {
                    // تغییر جهت تصادفی
                    if (Math.random() < 0.1) {
                        ghost.direction = ['up', 'down', 'left', 'right'][Math.floor(Math.random() * 4)];
                    }
                    
                    // حرکت شبح
                    switch(ghost.direction) {
                        case 'up': ghost.y--; break;
                        case 'down': ghost.y++; break;
                        case 'left': ghost.x--; break;
                        case 'right': ghost.x++; break;
                    }
                    
                    // بررسی برخورد با دیوار
                    if (ghost.x < 0) ghost.x = gameSize/gridSize - 1;
                    if (ghost.x >= gameSize/gridSize) ghost.x = 0;
                    if (ghost.y < 0) ghost.y = gameSize/gridSize - 1;
                    if (ghost.y >= gameSize/gridSize) ghost.y = 0;
                    
                    // به‌روزرسانی موقعیت شبح
                    ghost.element.style.left = ghost.x * gridSize + 'px';
                    ghost.element.style.top = ghost.y * gridSize + 'px';
                    
                    // بررسی برخورد با پک-من
                    if (pacman.x === ghost.x && pacman.y === ghost.y) {
                        gameOver();
                        return;
                    }
                }
                
                // به‌روزرسانی موقعیت پک-من
                document.querySelector('.pacman').style.left = pacman.x * gridSize + 'px';
                document.querySelector('.pacman').style.top = pacman.y * gridSize + 'px';
                
                // بررسی پایان بازی (جمع‌آوری تمام نقطه‌ها)
                if (dots.length === 0) {
                    alert(`تبریک! شما برنده شدید! امتیاز شما: ${score}`);
                    resetGame();
                }
            }
            
            // پایان بازی
            function gameOver() {
                alert(`بازی تمام شد! امتیاز شما: ${score}`);
                resetGame();
            }
            
            // بازنشانی بازی
            function resetGame() {
                score = 0;
                scoreElement.textContent = score;
                pacman = {x: 10, y: 10};
                direction = 'right';
                
                // پاک کردن نقطه‌ها و اشباح
                dots.forEach(dot => game.removeChild(dot.element));
                dots = [];
                ghosts.forEach(ghost => game.removeChild(ghost.element));
                ghosts = [];
                
                // ایجاد المان‌های جدید
                createDots();
                createGhosts();
                createPacman();
            }
            
            // کنترل‌های صفحه کلید
            document.addEventListener('keydown', (e) => {
                if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {
                    e.preventDefault();
                    
                    switch(e.key) {
                        case 'ArrowUp': direction = 'up'; break;
                        case 'ArrowDown': direction = 'down'; break;
                        case 'ArrowLeft': direction = 'left'; break;
                        case 'ArrowRight': direction = 'right'; break;
                    }
                }
            });
            
            // شروع بازی
            createDots();
            createGhosts();
            createPacman();
            
            window.gameIntervals = window.gameIntervals || [];
            window.gameIntervals.push(setInterval(update, 200));
        }

        // بازی تتریس
        function initTetris() {
            const game = document.getElementById('tetrisGame');
            const scoreElement = document.getElementById('tetrisScore');
            
            // پاک کردن بازی قبلی
            game.innerHTML = '';
            
            // متغیرهای بازی
            const rows = 20;
            const cols = 10;
            let grid = Array(rows).fill().map(() => Array(cols).fill(0));
            let currentPiece = null;
            let score = 0;
            let dropTime = 0;
            let dropInterval = 1000;
            
            // اشکال تتریس
            const shapes = [
                [[1, 1, 1, 1]], // I
                [[1, 1], [1, 1]], // O
                [[1, 1, 1], [0, 1, 0]], // T
                [[1, 1, 1], [1, 0, 0]], // L
                [[1, 1, 1], [0, 0, 1]], // J
                [[0, 1, 1], [1, 1, 0]], // S
                [[1, 1, 0], [0, 1, 1]]  // Z
            ];
            
            const colors = [
                '#00ffff', // I - Cyan
                '#ffff00', // O - Yellow
                '#ff00ff', // T - Magenta
                '#ffa500', // L - Orange
                '#0000ff', // J - Blue
                '#00ff00', // S - Green
                '#ff0000'  // Z - Red
            ];
            
            // ایجاد قطعه جدید
            function createPiece() {
                const shapeIndex = Math.floor(Math.random() * shapes.length);
                currentPiece = {
                    shape: shapes[shapeIndex],
                    color: colors[shapeIndex],
                    x: Math.floor(cols / 2) - Math.floor(shapes[shapeIndex][0].length / 2),
                    y: 0
                };
                
                // بررسی پایان بازی
                if (checkCollision()) {
                    alert(`بازی تمام شد! امتیاز شما: ${score}`);
                    resetGame();
                }
            }
            
            // بررسی برخورد
            function checkCollision() {
                for (let y = 0; y < currentPiece.shape.length; y++) {
                    for (let x = 0; x < currentPiece.shape[y].length; x++) {
                        if (currentPiece.shape[y][x] &&
                            (currentPiece.y + y >= rows ||
                             currentPiece.x + x < 0 ||
                             currentPiece.x + x >= cols ||
                             grid[currentPiece.y + y][currentPiece.x + x])) {
                            return true;
                        }
                    }
                }
                return false;
            }
            
            // تثبیت قطعه
            function lockPiece() {
                for (let y = 0; y < currentPiece.shape.length; y++) {
                    for (let x = 0; x < currentPiece.shape[y].length; x++) {
                        if (currentPiece.shape[y][x]) {
                            grid[currentPiece.y + y][currentPiece.x + x] = currentPiece.color;
                        }
                    }
                }
                
                // بررسی خطوط کامل
                checkLines();
                
                // ایجاد قطعه جدید
                createPiece();
            }
            
            // بررسی خطوط کامل
            function checkLines() {
                let linesCleared = 0;
                
                for (let y = rows - 1; y >= 0; y--) {
                    if (grid[y].every(cell => cell !== 0)) {
                        // حذف خط
                        grid.splice(y, 1);
                        grid.unshift(Array(cols).fill(0));
                        linesCleared++;
                        y++; // بررسی دوباره همان خط
                    }
                }
                
                // محاسبه امتیاز
                if (linesCleared > 0) {
                    score += linesCleared * 100;
                    scoreElement.textContent = score;
                    
                    // افزایش سرعت
                    dropInterval = Math.max(100, 1000 - Math.floor(score / 100) * 50);
                }
            }
            
            // رسم شبکه
            function drawGrid() {
                game.innerHTML = '';
                
                for (let y = 0; y < rows; y++) {
                    for (let x = 0; x < cols; x++) {
                        const block = document.createElement('div');
                        block.className = 'tetris-block';
                        block.style.background = grid[y][x] || 'transparent';
                        game.appendChild(block);
                    }
                }
                
                // رسم قطعه فعلی
                if (currentPiece) {
                    for (let y = 0; y < currentPiece.shape.length; y++) {
                        for (let x = 0; x < currentPiece.shape[y].length; x++) {
                            if (currentPiece.shape[y][x]) {
                                const blockIndex = (currentPiece.y + y) * cols + (currentPiece.x + x);
                                if (blockIndex >= 0 && blockIndex < rows * cols) {
                                    const block = game.children[blockIndex];
                                    block.style.background = currentPiece.color;
                                }
                            }
                        }
                    }
                }
            }
            
            // به‌روزرسانی بازی
            function update(time) {
                // افتادن قطعه
                dropTime += time - (window.lastTime || time);
                window.lastTime = time;
                
                if (dropTime > dropInterval) {
                    currentPiece.y++;
                    dropTime = 0;
                    
                    if (checkCollision()) {
                        currentPiece.y--;
                        lockPiece();
                    }
                }
                
                // رسم شبکه
                drawGrid();
                
                // ادامه بازی
                window.gameAnimationFrames = window.gameAnimationFrames || [];
                window.gameAnimationFrames.push(requestAnimationFrame(update));
            }
            
            // کنترل‌های صفحه کلید
            document.addEventListener('keydown', (e) => {
                if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {
                    e.preventDefault();
                    
                    if (!currentPiece) return;
                    
                    switch(e.key) {
                        case 'ArrowLeft':
                            currentPiece.x--;
                            if (checkCollision()) currentPiece.x++;
                            break;
                        case 'ArrowRight':
                            currentPiece.x++;
                            if (checkCollision()) currentPiece.x--;
                            break;
                        case 'ArrowDown':
                            currentPiece.y++;
                            if (checkCollision()) {
                                currentPiece.y--;
                                lockPiece();
                            }
                            dropTime = 0;
                            break;
                        case 'ArrowUp':
                            // چرخش
                            const rotated = [];
                            for (let x = 0; x < currentPiece.shape[0].length; x++) {
                                rotated[x] = [];
                                for (let y = currentPiece.shape.length - 1; y >= 0; y--) {
                                    rotated[x][currentPiece.shape.length - 1 - y] = currentPiece.shape[y][x];
                                }
                            }
                            
                            const originalShape = currentPiece.shape;
                            currentPiece.shape = rotated;
                            
                            if (checkCollision()) {
                                currentPiece.shape = originalShape;
                            }
                            break;
                    }
                    
                    drawGrid();
                }
            });
            
            // بازنشانی بازی
            function resetGame() {
                grid = Array(rows).fill().map(() => Array(cols).fill(0));
                score = 0;
                scoreElement.textContent = score;
                dropInterval = 1000;
                createPiece();
            }
            
            // شروع بازی
            createPiece();
            window.lastTime = 0;
            update(0);
        }

        // بازی پازل
        function initPuzzle() {
            const game = document.getElementById('puzzleGame');
            
            // پاک کردن بازی قبلی
            game.innerHTML = '';
            
            // ایجاد پازل
            const pieces = [];
            const positions = [];
            
            for (let i = 0; i < 9; i++) {
                const piece = document.createElement('div');
                piece.className = 'puzzle-piece';
                
                // محاسبه موقعیت پس‌زمینه
                const row = Math.floor(i / 3);
                const col = i % 3;
                
                piece.style.backgroundImage = 'linear-gradient(45deg, ' + 
                    ['#6c5ce7', '#a29bfe', '#fd79a8', '#00b894', '#fdcb6e'][i % 5] + ', ' +
                    ['#a29bfe', '#fd79a8', '#00b894', '#fdcb6e', '#6c5ce7'][i % 5] + ')';
                piece.style.backgroundPosition = `-${col * (400/3)}px -${row * (400/3)}px`;
                
                // ذخیره موقعیت اصلی
                positions.push({row, col});
                
                // اضافه کردن به بازی
                game.appendChild(piece);
                pieces.push(piece);
                
                // قابلیت کشیدن و رها کردن
                piece.draggable = true;
                
                piece.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', i);
                });
                
                piece.addEventListener('dragover', (e) => {
                    e.preventDefault();
                });
                
                piece.addEventListener('drop', (e) => {
                    e.preventDefault();
                    const fromIndex = parseInt(e.dataTransfer.getData('text/plain'));
                    const toIndex = i;
                    
                    // جابه‌جایی قطعات
                    if (fromIndex !== toIndex) {
                        const fromPiece = pieces[fromIndex];
                        const toPiece = pieces[toIndex];
                        
                        // جابه‌جایی موقعیت‌ها
                        const tempPos = positions[fromIndex];
                        positions[fromIndex] = positions[toIndex];
                        positions[toIndex] = tempPos;
                        
                        // به‌روزرسانی پس‌زمینه
                        fromPiece.style.backgroundPosition = `-${positions[fromIndex].col * (400/3)}px -${positions[fromIndex].row * (400/3)}px`;
                        toPiece.style.backgroundPosition = `-${positions[toIndex].col * (400/3)}px -${positions[toIndex].row * (400/3)}px`;
                        
                        // بررسی حل پازل
                        checkPuzzleSolved();
                    }
                });
            }
            
            // بررسی حل پازل
            function checkPuzzleSolved() {
                let solved = true;
                
                for (let i = 0; i < 9; i++) {
                    const row = Math.floor(i / 3);
                    const col = i % 3;
                    
                    if (positions[i].row !== row || positions[i].col !== col) {
                        solved = false;
                        break;
                    }
                }
                
                if (solved) {
                    setTimeout(() => {
                        alert('تبریک! پازل را حل کردید!');
                        shufflePuzzle();
                    }, 500);
                }
            }
            
            // به هم ریختن پازل
            function shufflePuzzle() {
                for (let i = positions.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [positions[i], positions[j]] = [positions[j], positions[i]];
                }
                
                // به‌روزرسانی نمایش
                for (let i = 0; i < 9; i++) {
                    pieces[i].style.backgroundPosition = `-${positions[i].col * (400/3)}px -${positions[i].row * (400/3)}px`;
                }
            }
            
            // شروع بازی با پازل به هم ریخته
            shufflePuzzle();
        }
    </script>
</body>
</html>